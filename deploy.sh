#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è Wasteland Traders –Ω–∞ GitHub Pages

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π Wasteland Traders..."

# 1. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üì¶ –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
npm run build

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏! –ü—Ä–µ—Ä—ã–≤–∞–µ–º –¥–µ–ø–ª–æ–π."
    exit 1
fi

# 2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ gh-pages
echo "üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–µ—Ç–∫—É gh-pages..."
git checkout gh-pages

# 3. –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –∫—Ä–æ–º–µ .git
echo "üßπ –û—á–∏—â–∞–µ–º –≤–µ—Ç–∫—É gh-pages..."
git rm -rf . 2>/dev/null || true

# 4. –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
echo "üìã –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã..."
cp -r dist/* .

# 5. –£–¥–∞–ª—è–µ–º –ø–∞–ø–∫—É dist
rmdir dist

# 6. –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã
echo "‚ûï –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–π–ª—ã –≤ git..."
git add .

# 7. –ö–æ–º–º–∏—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "üíæ –ö–æ–º–º–∏—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
git commit -m "Deploy $(date +%Y-%m-%d_%H-%M-%S)"

# 8. –ü—É—à–∏–º –Ω–∞ GitHub
echo "üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞ GitHub..."
git push origin gh-pages

# 9. –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ main
echo "üîÑ –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≤–µ—Ç–∫—É main..."
git checkout main

echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "üåê –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: https://eduard386.github.io/wasteland_traders/"
